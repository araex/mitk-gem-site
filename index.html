<!doctype html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <title>MITK-GEM</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/ico" href="favicon.ico">
        <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700">

        <script src="js/jquery-1.11.1.min.js"></script>
        <script src="js/lightbox.min.js"></script>

        <!-- build:css css/main.css -->
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/base.css">
        <link rel="stylesheet" href="css/utils.css">
        <link rel="stylesheet" href="css/components.css">
        <link rel="stylesheet" href="css/site.css">
        <link rel="stylesheet" href="css/mq.css">
        <link rel="stylesheet" href="css/print.css">
        <link rel="stylesheet" href="css/font-awesome-4.5.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="css/lightbox.css"/>
        <!-- endbuild -->

    </head>
    <body>
        <div class="site-header-container">
            <div class="site-header clearfix" role="banner">
                <div class="site-logo">
                    <a href="#home" class="white">MITK <i class="fa fa-diamond fa-lg hiColor"></i> GEM</a>
                </div>
                <ul class="site-nav inline-block-list hiColor">
                    <li><a href="#features" class="hiColor">Features</a></li>
                    <li><a href="#tutorial" class="hiColor">Tutorials</a></li>
                    <li><a href="#faq" class="hiColor">FAQ</a></li>
                    <li><a href="#about" class="hiColor">About</a></li>
                </ul>
            </div>
        </div><!-- end site-header -->

        <a class="anchor" id="home"></a>
        <div class="container">
            <div class="site-promo">
                <h1>MITK - <span class="hiColor">GE</span>nerate <span class="hiColor">M</span>odels</h1>
                <p class="description">MITK-GEM is a free open-source software pipeline to generate finite element models from image data. MITK-GEM is built on top of the Medical Imaging Interaction Toolkit (MITK) Workbench.</p>

                <div class="cta-option">
                    <a class="btn btn-download" href="https://simtk.org/project/xml/downloads.xml?group_id=1063">
                        <strong><i class="fa fa-download"></i> Download</strong>
                    </a>
                </div>

                <div class="cta-option">
                    <a class="btn btn-alt" href="https://github.com/araex/mitk-gem">
                        <i class="fa fa-github"></i> Source code
                    </a>
                </div>
            </div><!-- end site-promo -->
        </div>

        <a class="anchor" id="features"></a>
        <div class="site-section">
            <div class="container">
                <article>
                    <h2>Features</h2>
                    <p class="justify-text">
                    MITK-GEM implements all its features as plugins for the <a href="http://mitk.org/" class="extA">Medical Imaging Interaction Toolkit (MITK)</a> Workbench. It expands the MITK Workbench by offering a finite element model generation workflow with the following steps:
                    </p>
                    <ul class="justify-text">
                        <a href="#graphcut"><li>Interactive image segmentation with 3D Graphcuts<span><img class="icon" src="img/graphcut.png" alt="Icon GraphCut Plugin"></span>.</li></a>
                        <a href="#surfacemesh"><li>Surface mesh generation<img class="icon" src="img/voxel2mesh.png" alt="Icon GraphCut Plugin"></span>.</li></a>
                        <a href="#volumemesh"><li>Tetrahedral mesh generation<img class="icon" src="img/volumemesh.png" alt="Icon GraphCut Plugin"></span>.</li></a>
                        <a href="#materialmapping"><li>Highly configurable material mapping procedure<img class="icon" src="img/materialmapping.png" alt="Icon GraphCut Plugin"></span>.</li></a>
                    </ul>
                </article>

                <article>
                    <h2>Application overview</h2>
                    <p>
                        <a href="img/Overview.jpg" data-lightbox="overview" data-title="Overview">
                            <img src="img/Overview.png" alt="Workbench overview">
                        </a>
                        <ol class="justify-text">
                            <li>The Data Manager<span><img class="icon" src="img/datamanager.png" alt="Icon DataManager Plugin"></span>contains contains all loaded data (images, surfaces, meshes) as well as the results produced by the plugins. You can also save your results from here by right clicking on them and selecting save.</li>
                            <li>The toolbar containing all available plugins. Open a plugin by clicking on it.</li>
                            <li>The view of the currently opened plugin.</li>
                        </ol>
                    </p>
                </article>
            </div>
        </div> <!-- end section-download -->

        <a class="anchor" id="tutorial"></a>
        <div class="site-section site-section-example">
            <div class="container">
                <a class="anchor" id="graphcut"></a>
                <article>
                    <h2>Tutorial: Graphcut segmentation</h2>
                    <div class="flex-embed">
                        <video id="mitk_howto" controls preload="auto" poster="video/thumbnail.png" data-setup="{}">
                         <source src="video/MITKGraphCutSegmentationDemo_v2.mp4">
                         <source src="video/MITKGraphCutSegmentationDemo_v2.webm">
                         <p class="no-video">To view this video, please install a browser that <a href="http://caniuse.com/#feat=video">supports HTML5 video.</a></p>
                        </video>
                    </div>
                    <ol class="justify-text">
                        <li>Open the image you want to segment.</li>
                        <li>Switch to the Segmentation Plugin<span><img class="icon" src="img/segmentation.png" alt="Icon Segmentation Plugin"></span>and create a new mask for the background.</li>
                        <li>Pick the Paint Tool and set a brush size. </li>
                        <li>Mark the area that you consider background. Doing this on one slice should be sufficient.</li>
                        <li>Repeat for foreground.</li>
                        <li>Switch to the GraphCut3D Plugin<span><img class="icon" src="img/graphcut.png" alt="Icon GraphCut Plugin"></span>.</li>
                        <li>Check that all images are set correctly and adjust the parameters to your needs.</li>
                        <li>Click the 'Start' button and wait for it to finish.</li>
                        <li>Once finished, a new segmentation called 'graphcut segmentation' will appear in the Data Manager<span><img class="icon" src="img/datamanager.png" alt="Icon DataManager Plugin"></span>. You can right click it to save it on your disk or proceed with the surface mesh generation.</li>
                    </ol>
                </article>

                <a class="anchor" id="surfacemesh"></a>
                <article>
                    <h2>Tutorial: Surface mesh generation</h2>
                    <p>
                      <a href="img/screen_voxel2mesh.png" data-lightbox="tutorial" data-title="Tutorial">
                          <img src="img/screen_voxel2mesh.png" alt="Screenshot surface mesh plugin" style="max-width: 423px">
                      </a>
                      <ol class="justify-text">
                        <li>Select a mask in the Data Manager<span><img class="icon" src="img/datamanager.png" alt="Icon DataManager Plugin"></span>. A mask is a binary image with background values of 0, for example the output of the GraphCut3D Plugin<span><img class="icon" src="img/graphcut.png" alt="Icon GraphCut Plugin"></span>.</li>
                        <li>The mask will get passed down through all the steps represented by the group boxes: Median filter -> Gaussian smoothing -> Marching cubes -> Polygon smoothing. You can enable or disable a step by clicking the checkbox next to its title. </li>
                        <li>Adjust the settings to match your requirements. The default settings should give accurate results in most cases.</li>
                        <li>After pressing the "Generate surface" button, the mask will get processed and the resulting surface will be added to your Data Manager<span><img class="icon" src="img/datamanager.png" alt="Icon DataManager Plugin"></span>.
                      </ol>
                    </p>
                </article>

                <a class="anchor" id="volumemesh"></a>
                <article>
                    <h2>Tutorial: Tetrahedral mesh generation</h2>
                    <h1 class="hiColor">TODO: add content</h1>
                </article>

                <a class="anchor" id="materialmapping"></a>
                <article>
                    <h2>Tutorial: Material mapping</h2>
                    <a href="img/screen_calibration.png" data-lightbox="tutorial" data-title="Tutorial">
                        <img src="img/screen_calibration.png" alt="Screenshot bone density calibration" style="max-width: 547px">
                    </a>
                    <ol class="justify-text">
                      <li>Load an unstructured grid and a grayscale image and select them with the combo boxes.</li>
                      <li>Enter the bone density calibration values for your phantom into the table. The calibration unit can be set using the dropdown box.
                        <br/>If you already know your equation for Bone density &rho;, you can disable the calibration using the "Phantom calibration for &rho;_ct" checkbox and enter it directly below.</li>
                        <li>Note that after the calibration <span class="hiColor">all steps will use gHA/cm³ regardless of your chosen calibration unit!</span> Conversion happens automatically if necessary.</li>
                    </ol>

                    <a href="img/screen_calibration2.png" data-lightbox="tutorial" data-title="Tutorial">
                        <img src="img/screen_calibration2.png" alt="Screenshot bone density calibration 2" style="max-width: 547px">
                    </a>
                    <ol class="justify-text">
                      <li value="4">A linear equation for bone density &rho; will get fitted to your calibration using a least squares fitting technique. </li>
                      <li>The final bone density value &rho; used for further steps is evaluated in 3 steps. For more information refer to <a href="#">TODO: ADD PAPER HERE</a></li>
                    </ol>

                    <a href="img/screen_calibration3.png" data-lightbox="tutorial" data-title="Tutorial">
                        <img src="img/screen_calibration3.png" alt="Screenshot bone density calibration 3" style="max-width: 543px">
                    </a>
                    <ol class="justify-text">
                      <li value="6">Specify the power laws that should be applied to your bone density.</li>
                      <li>Using the "add" button, you can add additional power laws with a corresponding interval.</li>
                      <li>Press the "Start" button to start the material mapping. The resulting unstructured grid will have an additional point and cell array containing the material properties.</li>
                    </ol>
                    <h1 class="hiColor">TODO: better explanation</h1>
                </article>


            </div>
        </div> <!-- end section-tutorial -->

        <a class="anchor" id="faq"></a>
        <div class="site-section">
            <div class="container">
                <article>
                    <h2>Frequently Asked Questions</h2>
                    <h1 class="hiColor">TODO: currently only graphcut content</h1>
                    <div class="faq">
                        <input type="checkbox" id="q1">
                        <label for="q1">Can i use this tool for diagnosis and treatment?</label>
                        <div class="faq-content">
                            <p>No, MITK-GEM is for research only.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q2">
                        <label for="q2">Can i use this tool for my research?</label>
                        <div class="faq-content">
                            <p>Yes, MITK-GEM is released under the GPLv3 license and you may use it under these terms. If you do use it, please <a href="#cite-paper">cite the paper</a>.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q3">
                        <label for="q3">What does the 'Required Memory' field in the Graphcut3D plugin mean?</label>
                        <div class="faq-content">
                            <p>The graphcut algorithm requires large amounts of memory to build the necessary graph. This field tells you exactly how much memory the graph and the image data will allocate. It is highly recommended that you have at least this much free memory before starting the computation. If you do not have enough memory, see FAQ Section "I have less memory than 'Required memory'" for workarounds. </p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q4">
                        <label for="q4">I have less memory than 'Required memory'.</label>
                        <div class="faq-content">
                        <p>Not having enough memory will increase the computation time drastically and can even result in a crash of the application. Options at this point are: </p>
                            <ul>
                                <li>Crop the image to only contain the region of interest with the included image cropper plugin<span><img class="icon" src="img/crop.png" alt="Icon Crop Plugin"></span>.</li>
                                <li>Downsample the image using the included resample plugin<span><img class="icon" src="img/resample.png" alt="Icon Resample Plugin"></span>.</li>
                                <li>Create all the masks in the MITK Workbench and save them to your harddisk, then use the Command Line Segmentation Tool to do the computation. The CLI Tool is more memory efficient and is able to complete computations that the plugin can not. However, the computation times will still be very long. </li>
                            </ul>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q5">
                        <label for="q5">The Graphcut3D plugin takes very long for its computation.</label>
                        <div class="faq-content">
                            <p>The 'estimated time' is based on test results on one of our machines. Depending on your hardware, your results may vary. Especially if your machine is not able to store the complete graph in memory, the computation time will increase dramatically.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q6">
                        <label for="q6">The application crashes when i click 'Start' in the Graphcut3D plugin.</label>
                        <div class="faq-content">
                            <p>This is a problem when the plugin tries to allocate more memory than your machine can handle. Please refer to the FAQ section "I have less memory than 'Required memory'" for information on how to decrease the memory usage.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q7">
                        <label for="q7">How do i use the Command Line Segmentation Tool?</label>
                        <div class="faq-content">
                            <p> The standalone application uses a command line interface (CLI) instead of a graphical user interface. Usage requires basic knowledge of your operating systems terminal enviroment.</p>
                        <ol class="justify-text">
                            <li> <a href="#home">Download</a> the Segmentation Tool </li>
                            <li> Unzip the downloaded archive into a folder</li>
                            <li> Start a terminal and navigate to the unziped folder</li>
                            <li> Perform a graph-cut segmentation on the included data: </li>
                        </ol>
                        <div class="code-snippet">
                            <pre>
$ ./GraphCutSegmentation data/input.mhd data/foreground.mhd data/background.mhd data/output.mhd 50 0 1 </pre>
                        </div>
                        You can get additional information about the usage of the program by typing:
                        <div class="code-snippet">
                            <pre>
$ ./GraphCutSegmentation --help

Required: image foreground background output sigma boundaryDirection
image:               3D image in Hounsfield Units -1024 to 3071
foreground:          3D image non-zero pixels indicating foreground and 0 elsewhere
background:          3D image non-zero pixels indicating background and 0 elsewhere
output:              3D image resulting segmentation
sigma:               estimated noise in boundary term, try 50.0
boundaryDirection:   0-&gt;bidirectional; 1-&gt;bright to dark; 2-&gt;dark to bright
</pre>
                        </div>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q8">
                        <label for="q8">I have problems building the application from the source code.</label>
                        <div class="faq-content">
                            <p>There's a seperate FAQ for building over <a href="https://github.com/araex/mitk-gem/blob/master/README.md">here</a>.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q9">
                        <label for="q9">When starting the tool, i get a "undefined symbol: _ZN19QAbstractProxyModel11setItemData" error.</label>
                        <div class="faq-content">
                            <p>This error occurs on systems with a installed QT version older than 4.8. Please update your QT version.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q10">
                        <label for="q10">I can't see those sidebars shown in the screenshots and videos.</label>
                        <div class="faq-content">
                            <p>You have to open the plugins by clicking on their icons: <img class="icon" src="img/graphcut.png" alt="Icon GraphCut Plugin"> and <img class="icon" src="img/segmentation.png" alt="Icon Segmentation Plugin">.</p>
                            <a href="img/Screenshot_full.png" data-lightbox="Screenshot_full" data-title="Overview">
                                <img src="img/Screenshot_small.png" alt="Workbench overview">
                            </a>
                        </div>
                    </div>

                </article>
            </div>
        </div> <!-- end section-faq -->

        <a class="anchor" id="about"></a>
        <div class="site-section site-section-example">
            <div class="container">
                <article>
                    <h2>About</h2>
                    <h1 class="hiColor">TODO: add content or link to simtk?</h1>
                    <p class="justify-text">
                        This tool was developed for a paper comparing interactive graph cut image segmenation with manual segmentation for creation of femur finite element models. The paper was submitted to CMBBE in November 2014.
                    </p>
                </article>

                <article>
                    <h3>Abstract</h3>
                    <p class="justify-text">
                        In this study, we propose interactive graph cut image segmentation for fast creation of femur finite element (FE) models from clinical computed tomography scans for hip fracture prediction. Using a sample of 48 bone scans representing normal, osteopenic and osteoporotic subjects, the proximal femur was segmented using manual (gold standard) and graph cut segmentation. Segmentations were subsequently used to generate FE models in order to calculate overall stiffness and peak force in sideways fall simulations. Results show that with a reduction from 20 minutes to 2 minute interaction time, comparable FE results can be obtained. Average differences between segmentation methods of 0.21 mm were not significantly correlated with differences in FE derived stiffness (p = 0.18) but marginally correlated to differences in FE derived peak force (p = 0.05). We further found that changes in automatically assigned boundary conditions, as a consequence to small segmentation differences, were significantly correlated with FEA derived results. The proposed interactive graph cut segmentation tool is freely available online.
                    </p>
                </article>

                <a class="anchor" id="contact"></a>
                <article>
                <h3>Contact</h3>
                    <div class="grid">
                        <div class="grid-cell">
                            <h4>Corresponding author</h4>
                            <p>
                                Yves Pauchard
                                <br/><a href="mailto:yves.pauchard@zhaw.ch">yves.pauchard@zhaw.ch</a>
                            </p>
                        </div>
                        <div class="grid-cell">
                        </div>
                    </div>
                </article>
            </div>
        </div> <!-- end section-about -->
        <div class="site-footer" role="contentinfo">
                <p>
                    A project developed by the <a href="http://init.zhaw.ch/en/engineering/institutes-centres/institute-of-applied-information-technology/research-and-development/human-information-interaction/visual-computing-lab.html" class="hiColor">Visual Computing Lab</a> at the <a href="http://www.zhaw.ch/en.html" class="hiColor">Zurich University of Applied Sciences</a>.
                </p>
        </div>

    </body>
</html>
