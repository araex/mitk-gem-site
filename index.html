<!doctype html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <title>Interactive Graph-Cut Segmentation</title>
        <meta name="description" content="Interactive Graph-Cut Segmentation for Fast Creation of Finite Element Models from Clinical CT Data for Hip Fracture Prediction.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700">

        <script src="js/jquery-1.11.1.min.js"></script>
        <script src="js/lightbox.min.js"></script>

        <!-- build:css css/main.css -->
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/base.css">
        <link rel="stylesheet" href="css/utils.css">
        <link rel="stylesheet" href="css/components.css">
        <link rel="stylesheet" href="css/site.css">
        <link rel="stylesheet" href="css/mq.css">
        <link rel="stylesheet" href="css/print.css">
        <link rel="stylesheet" href="css/font-awesome-4.2.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="css/lightbox.css"/>
        <!-- endbuild -->

    </head>
    <body>
        <div class="site-header-container">
            <div class="site-header clearfix" role="banner">
                <div class="site-logo">
                    Graph <span class="symbol">&#x260a;</span> Cut 3D
                </div>
                <ul class="site-nav inline-block-list">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#download">Download</a></li>
                    <li><a href="#help">Getting started</a></li>
                    <li><a href="#about">About</a></li>
                </ul>
            </div>
        </div><!-- end site-header -->

        <a class="anchor" id="home"></a>
        <div class="container">
            <div class="site-promo">
                <h1>Interactive 3D Graph-Cut Segmentation</h1>
                <p class="description">A tool for 3-dimensional segmentation of medical image data. Developed for the study "Interactive Graph-Cut Segmentation for Fast Creation of Finite Element Models from Clinical CT Data for Hip Fracture Prediction".</p>

                <div class="cta-option">
                    <a class="btn btn-download" href="#download">
                        <strong><i class="fa fa-download"></i> Download</strong>
                    </a>
                </div>

                <div class="cta-option">
                    <a class="btn btn-alt" href="https://github.engineering.zhaw.ch/VisualComputingLab/MITK_GraphCut3D">
                        <i class="fa fa-github"></i> Source code
                    </a>
                </div>
            </div><!-- end site-promo -->
        </div>

        <a class="anchor" id="download"></a>
        <div class="site-section">
            <div class="container">
                <article>
                    <h2>Download</h2>
                    <p>If you are using this tool for your research, please cite the following paper:</p>
                    <a class="anchor" id="cite-paper"></a>
                    <blockquote>
                    Y. Pauchard, T. Fitze, D. Browarnik, A. Eskandari, W. Enns-Bray, H. P&#225;lsson, S. Sigurdsson, Stephen J. Ferguson, Tamara B. Harris, V. Gudnason and B. Helgason. "Interactive Graph-Cut Segmentation for Fast Creation of Finite Element Models from Clinical CT Data for Hip Fracture Prediction." Computer Methods in Biomechanics and Biomedical Engineering XX, no. X (Month 201X): XX - XX. doi:
                    </blockquote>
                </article>

                <article>
                    <h3>Interactive Segmentation Tool v1.0</h3>
                    <p>
                        Precompiled binaries of the Interactive Segmentation Tool (MITK Workbench with the all required plugins included).
                        <div class="infobox">
                            Download not available yet. The tool will be released early 2015.
                        </div>
                        <div class="download-links">
                            <a href="bin/mitk-1.0-osx_64bit.dmg"><i class="fa fa-apple"></i> Apple OSX</a>
                            <br/><a href="bin/mitk-1.0-win_64bit.exe"><i class="fa fa-windows"></i> Microsoft Windows</a>
                            <br/><a href="bin/mitk-1.0-linux_64bit.tar.gz"><i class="fa fa-linux"></i> Linux</a>
                        </div>
                    </p>
                </article>

                <div class="grid">
                    <div class="grid-cell">
                        <h4>Command Line Segmentation Tool v1.0</h4>
                        <p>
                            Precompiled binaries of the standandlone tool are available for the following systems:
                            <div class="download-links">
                                <a href="bin/standalone-1.0-osx_64bit.dmg"><i class="fa fa-apple"></i> Apple OSX</a>
                                <br/><a href="bin/standalone-1.0-win_64bit.exe"><i class="fa fa-windows"></i> Microsoft Windows</a>
                                <br/><a href="bin/standalone-1.0-linux_64bit.tar.gz"><i class="fa fa-linux"></i> Linux</a>
                            </div>
                        </p>
                    </div>

                    <div class="grid-cell">
                        <h4>Source code</h4>
                        <p>
                            The Interactive 3d Graph-Cut Segmentation Tool as well as the MITK plugin are open source and freely available.
                            <div class="download-links">
                                <a href="https://github.engineering.zhaw.ch/VisualComputingLab/MITK_GraphCut3D"><i class="fa fa-github"></i> Interactive Segmentation Tool</a>
                                <br/><a href="https://github.engineering.zhaw.ch/VisualComputingLab/ImageGraphCut3DSegmentation"><i class="fa fa-github"></i> Command Line Segmentation Tool</a>
                            </div>
                        </p>
                    </div>
                </div>
            </div>
        </div> <!-- end section-download -->

        <a class="anchor" id="help"></a>
        <div class="site-section site-section-example">
            <div class="content">
                <article>
                    <h2>Video tutorial for the MITK plugin</h2>
                    <div class="flex-embed">
                        <video id="mitk_howto" controls preload="auto" poster="video/thumbnail.png" data-setup="{}">
                         <source src="video/MITKGraphCutSegmentationDemo_v2.mp4">
                         <source src="video/MITKGraphCutSegmentationDemo_v2.webm">
                         <p class="no-video">To view this video, please install a browser that <a href="http://caniuse.com/#feat=video">supports HTML5 video.</a></p>
                        </video>
                    </div>
                    <ol class="justify-text">
                        <li>Open the image you want to segment.</li>
                        <li>Switch to the Segmentation Plugin<span><img class="icon" src="img/segmentation.png"></span>and create a new mask for the background.</li>
                        <li>Pick the Paint Tool and set a brush size. </li>
                        <li>Mark the area that you consider background. Doing this on one slice should be sufficient.</li>
                        <li>Repeat for foreground.</li>
                        <li>Switch to the GraphCut3D Plugin<span><img class="icon" src="img/graphcut.png"></span>.</li>
                        <li>Check that all images are set correctly and adjust the parameters to your needs.</li>
                        <li>Click the 'Start' button and wait for it to finish.</li>
                        <li>Once finished, a new segmentation called 'graphcut segmentation' will appear in the Data Manager <span><img class="icon" src="img/datamanager.png"></span>. Right click it to save or create a polygon mesh.</li>
                    </ol>
                </article>

                <article>
                    <h2>FAQ</h2>
                    <div class="faq">
                        <input type="checkbox" id="q1">
                        <label for="q1">Can i use this tool for diagnosis and treatment?</label>
                        <div class="faq-content">
                            <p>No, GraphCut3D is for research only.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q2">
                        <label for="q2">Can i use this tool for my research?</label>
                        <div class="faq-content">
                            <p>Yes, GraphCut3D is released under the GPLv3 license and you may use it under these terms. If you do use it, please <a href="#cite-paper">cite the paper</a>.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q3">
                        <label for="q3">What does the 'Required Memory' field mean?</label>
                        <div class="faq-content">
                            <p>The graphcut algorithm requires large amounts of memory to build the necessary graph. This field tells you exactly how much memory the graph and the image data will allocate. It is highly recommended that you have at least this much free memory before starting the computation. If you do not have enough memory, see FAQ Section "I have less memory than 'Required memory'" for workarounds. </p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q4">
                        <label for="q4">I have less memory than 'Required memory'.</label>
                        <div class="faq-content">
                        <p>Not having enough memory will increase the computation time drastically and can even result in a crash of the application. Options at this point are: </p>
                            <ul>
                                <li>Crop the image to only contain the region of interest with the included image cropper plugin<span><img class="icon" src="img/crop.png"></span>.</li>
                                <li>Downsample the image using the included resample plugin<span><img class="icon" src="img/resample.png"></span>.</li>
                                <li>Create all the masks in the MITK Workbench and save them to your harddisk, then use the Command Line Segmentation Tool to do the computation. The CLI Tool is more memory efficient and is able to complete computations that the plugin can not. However, the computation times will still be very long. </li>
                            </ul>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q5">
                        <label for="q5">The plugin takes very long for its computation.</label>
                        <div class="faq-content">
                            <p>The 'estimated time' is based on test results on one of our machines. Depending on your hardware, your results may vary. Especially if your machine is not able to store the complete graph in memory, the computation time will increase dramatically.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q6">
                        <label for="q6">The application crashes when i click 'Start'.</label>
                        <div class="faq-content">
                            <p>This is a problem when the plugin tries to allocate more memory than your machine can handle. Please refer to the FAQ section "I have less memory than 'Required memory'" for information on how to decrease the memory usage.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q7">
                        <label for="q7">How do i use the Command Line Segmentation Tool?</label>
                        <div class="faq-content">
                            <p> The standalone application uses a command line interface (CLI) instead of a graphical user interface. Usage requires basic knowledge of your operating systems terminal enviroment.</p>
                        <ol class="justify-text">
                            <li> <a href="#download">Download</a> the Segmentation Tool </li>
                            <li> Unzip the downloaded archive into a folder</li>
                            <li> Start a terminal and navigate to the unziped folder</li>
                            <li> Perform a graph-cut segmentation on the included data: </li>
                        </ol>
                        <div class="code-snippet">
                            <pre>
$ ./GraphCutSegmentation data/input.mhd data/foreground.mhd data/background.mhd data/output.mhd 50 0 1 </pre>
                        </div>
                        You can get additional information about the usage of the program by typing:
                        <div class="code-snippet">
                            <pre>
$ ./GraphCutSegmentation --help

Required: image foreground background output sigma boundaryDirection
image:               3D image in Hounsfield Units -1024 to 3071
foreground:          3D image non-zero pixels indicating foreground and 0 elsewhere
background:          3D image non-zero pixels indicating background and 0 elsewhere
output:              3D image resulting segmentation
sigma:               estimated noise in boundary term, try 50.0
boundaryDirection:   0-&gt;bidirectional; 1-&gt;bright to dark; 2-&gt;dark to bright
</pre>
                        </div>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q8">
                        <label for="q8">I have problems building the application from the source code.</label>
                        <div class="faq-content">
                            <p>There's a seperate FAQ for building over <a href="https://github.engineering.zhaw.ch/VisualComputingLab/MITK_GraphCut3D">here</a>.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q9">
                        <label for="q9">When starting the tool, i get a "undefined symbol: _ZN19QAbstractProxyModel11setItemData" error.</label>
                        <div class="faq-content">
                            <p>This error occurs on systems with a installed QT version older than 4.8. Please update your QT version.</p>
                        </div>
                    </div>
                    <div class="faq">
                        <input type="checkbox" id="q10">
                        <label for="q10">I can't see those sidebars shown in the video.</label>
                        <div class="faq-content">
                            <p>You have to open the plugins by clicking on their icons: <img class="icon" src="img/graphcut.png"> and <img class="icon" src="img/segmentation.png">.</p>
                            <a href="img/Screenshot_full.png" data-lightbox="Screenshot_full" data-title="Overview">
                                <img src="img/Screenshot_small.png">
                            </a>
                        </div>
                    </div>

                </article>
            </div>
        </div> <!-- end section-example -->

        <a class="anchor" id="about"></a>
        <div class="site-section">
            <div class="container">
                <article>
                    <h2>About</h2>
                    <p class="justify-text">
                        This tool was developed for a paper comparing interactive graph cut image segmenation with manual segmentation for creation of femur finite element models. The paper was submitted to CMBBE in November 2014.
                    </p>
                </article>

                <article>
                    <h3>Abstract</h3>
                    <p class="justify-text">
                        In this study, we propose interactive graph cut image segmentation for fast creation of femur finite element (FE) models from clinical computed tomography scans for hip fracture prediction. Using a sample of 48 bone scans representing normal, osteopenic and osteoporotic subjects, the proximal femur was segmented using manual (gold standard) and graph cut segmentation. Segmentations were subsequently used to generate FE models in order to calculate overall stiffness and peak force in sideways fall simulations. Results show that with a reduction from 20 minutes to 2 minute interaction time, comparable FE results can be obtained. Average differences between segmentation methods of 0.21 mm were not significantly correlated with differences in FE derived stiffness (p = 0.18) but marginally correlated to differences in FE derived peak force (p = 0.05). We further found that changes in automatically assigned boundary conditions, as a consequence to small segmentation differences, were significantly correlated with FEA derived results. The proposed interactive graph cut segmentation tool is freely available online.
                    </p>
                </article>

                <a class="anchor" id="contact"></a>
                <article>
                <h3>Contact</h3>
                    <div class="grid">
                        <div class="grid-cell">
                            <h4>Corresponding author</h4>
                            <p>
                                Yves Pauchard
                                <br/><a href="mailto:yves.pauchard@zhaw.ch">yves.pauchard@zhaw.ch</a>
                            </p>
                        </div>
                        <div class="grid-cell">
                        </div>
                    </div>
                </article>
            </div>
        </div> <!-- end section-about -->
        <div class="site-footer" role="contentinfo">
                <p>
                    A project developed by the <a href="http://init.zhaw.ch/en/engineering/institutes-centres/institute-of-applied-information-technology/research-and-development/human-information-interaction/visual-computing-lab.html">Visual Computing Lab</a> at the <a href="http://www.zhaw.ch/en.html">Zurich University of Applied Sciences</a>.
                </p>
        </div>

    </body>
</html>
